.. -*- coding: utf-8; mode: rst -*-

========
LinuxDoc
========

.. automodule:: linuxdoc
    :members:
    :undoc-members:
    :show-inheritance:

* documentation: http://return42.github.io/linuxdoc
* reposetory:    `github return42/fspath <https://github.com/return42/linuxdoc>`_
* Author e-mail: *markus.heiser*\ *@*\ *darmarIT.de*

Installing
==========

Install bleading edge::

  pip install --user git+http://github.com/return42/linuxdoc.git

or clone from github::

  git clone https://github.com/return42/linuxdoc
  cd linuxdoc
  make install


Linux Kernel Documentation
==========================

In the 4.8 kernel and beyond a sphinx-doc build is available, if you like to see
how (fast) *linuxdoc* builds your kernel documentation, add the following patch
to the ``conf.py``. The patch deactivates the sphinx extensions from the kernel
source tree and activates linuxdoc sphinx extensions.

.. code-block:: diff

    diff --git a/Documentation/conf.py b/Documentation/conf.py
    index 96b7aa6..7db25f8 100644
    --- a/Documentation/conf.py
    +++ b/Documentation/conf.py
    @@ -18,7 +18,7 @@ import os
     # If extensions (or modules to document with autodoc) are in another directory,
     # add these directories to sys.path here. If the directory is relative to the
     # documentation root, use os.path.abspath to make it absolute, like shown here.
    -sys.path.insert(0, os.path.abspath('sphinx'))
    +#sys.path.insert(0, os.path.abspath('sphinx'))

     # -- General configuration ------------------------------------------------

    @@ -28,7 +28,16 @@ sys.path.insert(0, os.path.abspath('sphinx'))
     # Add any Sphinx extension module names here, as strings. They can be
     # extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
     # ones.
    -extensions = ['kernel-doc', 'rstFlatTable', 'kernel_include']
    +extensions = [
    +    'linuxdoc.rstKernelDoc'
    +    , 'linuxdoc.rstFlatTable'
    +    , 'linuxdoc.kernel_include'
    +    , 'linuxdoc.manKernelDoc'
    +    , 'sphinx.ext.todo' ]
    +
    +kernel_doc_verbose_warn = False
    +kernel_doc_raise_error = False
    +kernel_doc_mode = "reST"

     # Gracefully handle missing rst2pdf.
     try:
    @@ -128,7 +137,7 @@ pygments_style = 'sphinx'
     #keep_warnings = False

     # If true, `todo` and `todoList` produce output, else they produce nothing.
    -todo_include_todos = False
    +todo_include_todos = True

     primary_domain = 'C'
     highlight_language = 'C'


The next patch adds a list of TODO entries in with kernel-doc *Oops*. The
entries are generated by the kernel-doc parser if can't generate some requested
documentation. For more details see: :ref:`kernel-doc:kernel-doc-directive`.

.. code-block:: diff

    diff --git a/Documentation/index.rst b/Documentation/index.rst
    index 43c722f..f274681 100644
    --- a/Documentation/index.rst
    +++ b/Documentation/index.rst
    @@ -6,6 +6,8 @@
     Welcome to The Linux Kernel's documentation!
     ============================================

    +.. todolist::
    +
     Nothing for you to see here *yet*. Please move along.


Source Code Documentation
=========================

.. toctree::
   :maxdepth: 2

   linuxdoc/linuxdoc


Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`
